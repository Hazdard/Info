https://tryhackme.com/room/ccpentesting ; pour voir les réponses qui peuvent être utiles.

Nmap c'est bien !


NETCAT :

Netcat aussi appelé nc est un outil très polyvalent. Il permet aux utilsiateurs de se connecter à des ports et d'envoyer/recevoir des données. Il permet aussi aux machines de recevoir des données et connections sur un port spécifique, faisant de lui un outil privilégié pour obtenir un Reverse Shell (càd executer des commandes sur la machine cible en utilisant la connection sur un de ses ports ouverts, et récuperer la sortie des commandes sur notre machine). 
(Je vais faire la room 'What The Shell' qui devrait m'en apprendre plus, pour le moment : RTFM).


GOBUSTER :

Le problème des intrusions web est de ne rien savoir sur où se trouve les ressources. Gobuster permet de trouver des répertoires valides à partir d'une liste. Gobuster peut aussi être utilisé pour valider des sous-domaines à l'aide de la même méthode.
ATTENTION : la section 'help' est incomplète, voir le man en ligne !
Exemple d'utilisation :
gobuster dir -w  /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://10.10.199.137/ -x xxa
Va scanner la cible en cherchant tous les fichiers ayant l'extension .xxa .
Ne pas oublier de checker les différentes extensions si l'on trouve un directory.


NIKTO :

C'est un web scanner qui permet de trouver des vulnérabilités classiques. Utilisé pour avoir des infos sur la cible et trouver des failles éventuels à des CVE (Commun Vulnerability and Exposure) comme shellshock.


METASPLOIT :

C'est l'un des framework de pentest les plus utilisés. Contient une immense database de quasiment tous les CVE.

Se lance avec 'msfconsole'. Tapper help pour avoir toutes les informations nécessaires. Une fois l'exploit lancé avec 'exploit', on obtient un shell normal ou un shell Meterpreter, qui est le 'centre de controle' de Metasploit. Liste des commandes de Meterpreter ici : https://www.offensive-security.com/metasploit-unleashed/meterpreter-basics/
Tapper 'background' dans le shell meterpreter pour pouvoir retourner dans la msfconsole et lancer d'autres modules.
Les shells normaux peuvent souvent être upgrade vers un shell meterpreter avec l'exploit : post/multi/manage/shell_to_meterpreter


HASHCAT ET JOHNTHERIPPER

Lorsque l'on a accès à une database, il est très commun de trouver des données cryptés : 'hashed passwords' par exemple. Peut importe quel outil on utilise, tous les hash ont le même format, séparés par une ligne :
<hash 1>

<hash 2>

<hash 3>

Les 'salts' (voir wiki pour infos) sont générallement mis à la fin du hash, séparés par : , : <hash1>:<salt>

Cela peut différer en fonction des algos de cryptage utilisés, donc vérifier sur le web avant.

/usr/share/wordlists/rockyou.txt est une wordlist très utile
/usr/share/hashcat/rules contient pleins de règles, et rockyou-3000 à l'air STONKS (dive.rule est très bien aussi).

hashid [file] ; va donner les types de hash potentiels de chaques hash du fichier. ET on peut rajouter l'option -m pour avoir le mode Hashcat associé.

hashcat --help pour avoir toutes les infos

Exemple : hashcat -m 0 fichier.hash /usr/share/wordlists/rockyou.txt --rules /usr/share/hashcat/rules/rockyou-3000.txt ; pour faire une attaque par dictionnaire avec des règles. 
On peut même spécifier tout un dossier de règles avec --rules-list <dir>. -D 1,3 pour activer le CPU et le GPU.

Les masques aussi c'est cool, voir comment ça marche ! 

john --list=formats pour avoir tous les types de hash possibles. Pour un format standard, --format=raw-<format> est la syntaxe. GL pour la syntaxe.


INJECTIONS SQL

Des fois on ne peut pas utiliser sqlmap à cause de limites du pare-feu, donc il faut faire soi-même à la main : https://owasp.org/www-community/attacks/SQL_Injection  ; pour apprendre
Sinon voir le cours pour avoir les réponses aux questions utiles.


SAMBA 

La plupart du temps quand on va faire des pentests sur des machiens Windows, ce sera en présence de samba, donc c'est bien de savoir l'énumérer. smbmap est bien pour ça.
smbclient est cool aussi, permet de faire quasiment tout ce que smbmap fait, et en plus propose un prompt interactif.
Note : impacket est une collection de scripts très utiles pour windows. Ils sont tous ici : https://github.com/SecureAuthCorp/impacket


PRIVILIEGE ESCALATION 

C'est bien mais c'est pas dans le cours et il donne que des liens chiants.